{"name":"remora","description":"Methylation/modified base calling separated from basecalling.","usage":"remora [-h] [-v] {dataset,model,infer,validate} ...","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"},{"names":["-v","--version"],"argument":"","description":"Show Remora version and exit."}],"subcommands":[{"name":"dataset","description":"Create or perform operations on a Remora dataset","usage":"remora dataset [-h] {prepare,split,merge,inspect} ...","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"}],"subcommands":[{"name":"prepare","description":"Prepare Remora training dataset.","usage":"remora dataset prepare [-h] [--output-remora-training-file OUTPUT_REMORA_TRAINING_FILE] [--output-remora-reads-file OUTPUT_REMORA_READS_FILE] [--log-filename LOG_FILENAME] [--mod-base SINGLE_LETTER_CODE MOD_BASE] [--motif MOTIF FOCUS_POSITION] [--chunk-context CHUNK_CONTEXT CHUNK_CONTEXT] [--min-samples-per-base MIN_SAMPLES_PER_BASE] [--kmer-context-bases KMER_CONTEXT_BASES KMER_CONTEXT_BASES] [--max-chunks-per-read MAX_CHUNKS_PER_READ] [--base-start-justify] [--offset OFFSET] [--refine-kmer-level-table REFINE_KMER_LEVEL_TABLE] [--refine-rough-rescale] [--refine-scale-iters REFINE_SCALE_ITERS] [--refine-half-bandwidth REFINE_HALF_BANDWIDTH] [--refine-algo {dwell_penalty,Viterbi}] [--refine-short-dwell-parameters TARGET LIMIT WEIGHT] [--mod-base-control] [--base-pred] [--processes PROCESSES] input_reads","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"},{"names":["--output-remora-training-file"],"argument":"OUTPUT_REMORA_TRAINING_FILE","description":"Output Remora training dataset file. Default: remora_training_dataset.npz"},{"names":["--output-remora-reads-file"],"argument":"OUTPUT_REMORA_READS_FILE","description":"Output Remora reads to disk. Default: Don't save reads."},{"names":["--log-filename"],"argument":"LOG_FILENAME","description":"Log filename. Default: Don't output log file."},{"names":["--mod-base"],"argument":"SINGLE_LETTER_CODE MOD_BASE","description":"If provided input is RemoraReads pickle, modified bases must be provided. Exmaple: `--mod-base m 5mC --mod-base h 5hmC`"},{"names":["--motif"],"argument":"MOTIF FOCUS_POSITION","description":"Extract training chunks centered on a defined motif. Argument takes 2 values representing 1) sequence motif and 2) focus position within the motif. For example to restrict to CpG sites use \"--motif CG 0\". Default: Any context (\"N 0\")"},{"names":["--chunk-context"],"argument":"CHUNK_CONTEXT CHUNK_CONTEXT","description":"Number of context signal points to select around the central position. Default: (50, 50)"},{"names":["--min-samples-per-base"],"argument":"MIN_SAMPLES_PER_BASE","description":"Minimum number of samples per base. This sets the size of the ragged arrays of chunk sequences. Default: 5"},{"names":["--kmer-context-bases"],"argument":"KMER_CONTEXT_BASES KMER_CONTEXT_BASES","description":"Definition of k-mer (derived from the reference) passed into the model along with each signal position. Default: (1, 1)"},{"names":["--max-chunks-per-read"],"argument":"MAX_CHUNKS_PER_READ","description":"Maxiumum number of chunks to extract from a single read. Default: 15"},{"names":["--base-start-justify"],"argument":"","description":"Justify extracted chunk against the start of the base of interest. Default justifies chunk to middle of signal of the base of interest."},{"names":["--offset"],"argument":"OFFSET","description":"Offset selected chunk position by a number of bases. Default: 0"},{"names":["--refine-kmer-level-table"],"argument":"REFINE_KMER_LEVEL_TABLE","description":"Tab-delimited file containing no header and two fields: 1. string k-mer sequence and 2. float expected normalized level. All k-mers must be the same length and all combinations of the bases 'ACGT' must be present in the file."},{"names":["--refine-rough-rescale"],"argument":"","description":"Apply a rough rescaling using quantiles of signal+move table and levels."},{"names":["--refine-scale-iters"],"argument":"REFINE_SCALE_ITERS","description":"Number of iterations of signal mapping refinement and signal re-scaling to perform. Set to 0 (default) in order to perform signal mapping refinement, but skip re-scaling. Set to -1 to skip signal mapping (potentially using levels for rough rescaling)."},{"names":["--refine-half-bandwidth"],"argument":"REFINE_HALF_BANDWIDTH","description":"Half bandwidth around signal mapping over which to search for new path."},{"names":["--refine-algo"],"argument":"{dwell_penalty,Viterbi}","description":"Refinement algorithm to apply (if kmer level table is provided)."},{"names":["--refine-short-dwell-parameters"],"argument":"TARGET LIMIT WEIGHT","description":"Short dwell penalty refiner parameters. Dwells shorter than LIMIT will be penalized a value of `WEIGHT * (dwell - TARGET)^2`. Default: (15, 5, 0.05)"},{"names":["--mod-base-control"],"argument":"","description":"Is this a modified bases control sample?"},{"names":["--base-pred"],"argument":"","description":"Train to predict bases (SNPs) and not mods."},{"names":["--processes"],"argument":"PROCESSES","description":"Number of worker processes. Default: 1"}]},{"name":"split","description":"Split Remora dataset","usage":"remora dataset split [-h] [--output-basename OUTPUT_BASENAME] [--val-prop VAL_PROP] [--val-num VAL_NUM] [--unstratified] [--by-label] input_remora_dataset","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"},{"names":["--output-basename"],"argument":"OUTPUT_BASENAME","description":"Basename for output datasets. Default: split_remora_dataset"},{"names":["--val-prop"],"argument":"VAL_PROP","description":"The proportion of data to be split into validation set, where val-prop in [0,0.5)."},{"names":["--val-num"],"argument":"VAL_NUM","description":"Number of validation chunks to select."},{"names":["--unstratified"],"argument":"","description":"For --val-prop split, perform unstratified splitting. Default will perform split stratified over labels."},{"names":["--by-label"],"argument":"","description":"Split dataset into one dataset for each unique label."}]},{"name":"merge","description":"Merge Remora datasets","usage":"remora dataset merge [-h] [--input-dataset INPUT_DATASET INPUT_DATASET] --output-dataset OUTPUT_DATASET [--balance]","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"},{"names":["--input-dataset"],"argument":"INPUT_DATASET INPUT_DATASET","description":"1) Remora training dataset path and 2) max number of chunks to extract from this dataset."},{"names":["--output-dataset"],"argument":"OUTPUT_DATASET","description":"Output path for dataset"},{"names":["--balance"],"argument":"","description":"Automatically balance classes when merging"}]},{"name":"inspect","description":"Inspect Remora dataset","usage":"remora dataset inspect [-h] remora_dataset_path","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"}]}]},{"name":"model","description":"Train or perform operations on Remora models","usage":"remora model [-h] {train,export,list_pretrained} ...","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"}],"subcommands":[{"name":"train","description":"Train Remora model","usage":"remora model train [-h] [--val-prop VAL_PROP] [--batch-size BATCH_SIZE] [--chunk-context CHUNK_CONTEXT CHUNK_CONTEXT] [--kmer-context-bases KMER_CONTEXT_BASES KMER_CONTEXT_BASES] [--ext-val EXT_VAL [EXT_VAL ...]] [--balance] [--output-path OUTPUT_PATH] [--save-freq SAVE_FREQ] [--overwrite] --model MODEL [--size SIZE] [--epochs EPOCHS] [--optimizer {adamw,sgd,adam}] [--scheduler SCHEDULER] [--lr LR] [--weight-decay WEIGHT_DECAY] [--early-stopping EARLY_STOPPING] [--seed SEED] [--filter-fraction FILTER_FRACTION] [--lr-sched-kwargs NAME VALUE TYPE] [--balanced-batch] [--device DEVICE] remora_dataset_path","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"},{"names":["--val-prop"],"argument":"VAL_PROP","description":"Proportion of the dataset to be used as validation. Default: 0.010000"},{"names":["--batch-size"],"argument":"BATCH_SIZE","description":"Number of samples per batch. Default: 1000"},{"names":["--chunk-context"],"argument":"CHUNK_CONTEXT CHUNK_CONTEXT","description":"Override chunk context from data prep. Number of context signal points to select around the central position."},{"names":["--kmer-context-bases"],"argument":"KMER_CONTEXT_BASES KMER_CONTEXT_BASES","description":"Override kmer context bases from data prep. Definition of k-mer (derived from the reference) passed into the model along with each signal position."},{"names":["--ext-val"],"argument":"EXT_VAL [EXT_VAL ...]","description":"Path(s) to the external validation Remora datasets."},{"names":["--balance"],"argument":"","description":"Balance classes exactly prior to training"},{"names":["--output-path"],"argument":"OUTPUT_PATH","description":"Path to the output files. Default: remora_train_results"},{"names":["--save-freq"],"argument":"SAVE_FREQ","description":"After how many epochs to save the model. Default 10"},{"names":["--overwrite"],"argument":"","description":"Overwrite existing output directory if existing."},{"names":["--model"],"argument":"MODEL","description":"Model architecture file (required)"},{"names":["--size"],"argument":"SIZE","description":"Model layer size. Default: 64"},{"names":["--epochs"],"argument":"EPOCHS","description":"Number of training epochs. Default: 50"},{"names":["--optimizer"],"argument":"{adamw,sgd,adam}","description":"Optimizer setting. Default: adamw"},{"names":["--scheduler"],"argument":"SCHEDULER","description":"Scheduler setting. Default: None"},{"names":["--lr"],"argument":"LR","description":"Learning rate setting. Default: 0.001000"},{"names":["--weight-decay"],"argument":"WEIGHT_DECAY","description":"Weight decay setting. Default: 0.000100"},{"names":["--early-stopping"],"argument":"EARLY_STOPPING","description":"Stops training after a number of epochs without improvement.If set to 0 no stopping is done. Default: 0"},{"names":["--seed"],"argument":"SEED","description":"Seed value. Default: Random seed"},{"names":["--filter-fraction"],"argument":"FILTER_FRACTION","description":"Fraction of predictions to filter in validation reporting. Un-filtered validation metrics will always be reported as well. Default: 0.100000"},{"names":["--lr-sched-kwargs"],"argument":"NAME","description":"VALUE TYPE"},{"names":["--balanced-batch"],"argument":"","description":"Balance classes exactly for each batch in training"},{"names":["--device"],"argument":"DEVICE","description":"ID of GPU that is used for training. Default: Use CPU."}]},{"name":"export","description":"Export a model to ONNX format for inference.","usage":"remora model export [-h] [--model-path MODEL_PATH] checkpoint_path output_path","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"},{"names":["--model-path"],"argument":"MODEL_PATH","description":"Path to a model architecture. Default: Use path from checkpoint."}]},{"name":"list_pretrained","description":"List pre-trained modified base models.","usage":"remora model list_pretrained [-h] [--pore PORE] [--basecall-model-type BASECALL_MODEL_TYPE] [--basecall-model-version BASECALL_MODEL_VERSION] [--modified-bases MODIFIED_BASES [MODIFIED_BASES ...]] [--remora-model-type REMORA_MODEL_TYPE] [--remora-model-version REMORA_MODEL_VERSION]","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"},{"names":["--pore"],"argument":"PORE","description":"specify pore type"},{"names":["--basecall-model-type"],"argument":"BASECALL_MODEL_TYPE","description":"specify the basecaller model type (e.g., fast, hac or sup)"},{"names":["--basecall-model-version"],"argument":"BASECALL_MODEL_VERSION","description":"specify the version of the basecaller"},{"names":["--modified-bases"],"argument":"MODIFIED_BASES [MODIFIED_BASES ...]","description":"specify the modified base models you are interested in"},{"names":["--remora-model-type"],"argument":"REMORA_MODEL_TYPE","description":"specify the motif or context that the remora model has been trained on"},{"names":["--remora-model-version"],"argument":"REMORA_MODEL_VERSION","description":"specify the remora model version"}]}]},{"name":"infer","description":"Perform Remora model inference","usage":"remora infer [-h] {from_taiyaki_mapped_signal,from_remora_dataset} ...","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"}]},{"name":"validate","description":"Validate modified base predictions","usage":"remora validate [-h] {from_modbams} ...","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"}],"subcommands":[{"name":"from_modbams","description":"Validate on modBAMs. Prints a single line with 1) error rate, 2) false positive rate, 3) false negative rate, 4) fraction of calls filtered, 6) total number of calls, 7) thresholds (in modbam 0-255 scale), and 8) [--name]","usage":"remora validate from_modbams [-h] --bams BAMS [BAMS ...] [--mod-bams MOD_BAMS [MOD_BAMS ...]] [--ground-truth-positions GROUND_TRUTH_POSITIONS] [--full-output-filename FULL_OUTPUT_FILENAME] [--name NAME] [--fixed-thresh FIXED_THRESH FIXED_THRESH] [--regions-bed REGIONS_BED] [--pct-filt PCT_FILT] [--mod-base MOD_BASE] [--allow-unbalanced]","options":[{"names":["-h","--help"],"argument":"","description":"show this help message and exit"},{"names":["--bams"],"argument":"BAMS","description":"--mod-bams MOD_BAMS [MOD_BAMS ...]"},{"names":["--ground-truth-positions"],"argument":"GROUND_TRUTH_POSITIONS","description":"--full-output-filename FULL_OUTPUT_FILENAME"},{"names":["--name"],"argument":"NAME","description":"--fixed-thresh FIXED_THRESH FIXED_THRESH"},{"names":["--regions-bed"],"argument":"REGIONS_BED","description":"--pct-filt PCT_FILT"},{"names":["--mod-base"],"argument":"MOD_BASE","description":"--allow-unbalanced"}]}]}],"version":"Remora version: 1.1.1"}
