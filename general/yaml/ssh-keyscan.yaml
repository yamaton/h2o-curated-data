name: ssh-keyscan
description: ssh-keyscan
usage: ssh-keyscan [-46cDHv] [-f file] [-p port] [-T timeout] [-t type] [host | addrlist namelist]
options:
  - names:
      - "-4"
    argument: ""
    description: Force ssh-keyscan to use IPv4 addresses only.
  - names:
      - "-6"
    argument: ""
    description: Force ssh-keyscan to use IPv6 addresses only.
  - names:
      - -c
    argument: ""
    description: Request certificates from target hosts instead of plain keys.
  - names:
      - -D
    argument: ""
    description: Print keys found as SSHFP DNS records. The default is to print keys in a format usable as a ssh(1) known_hosts file.
  - names:
      - -f
    argument: file
    description: 'Read hosts or “addrlist namelist” pairs from file, one per line. If ‘-’ is supplied instead of a filename, ssh-keyscan will read from the standard input. Input is expected in the format:'
  - names:
      - -H
    argument: ""
    description: Hash all hostnames and addresses in the output. Hashed names may be used normally by ssh(1) and sshd(8), but they do not reveal identifying information should the file's contents be disclosed.
  - names:
      - -p
    argument: port
    description: Connect to port on the remote host.
  - names:
      - -T
    argument: timeout
    description: Set the timeout for connection attempts. If timeout seconds have elapsed since a connection was initiated to a host or since the last time anything was read from that host, the connection is closed and the host in question considered unavailable. The default is 5 seconds.
  - names:
      - -t
    argument: type
    description: Specify the type of the key to fetch from the scanned hosts. The possible values are “dsa”, “ecdsa”, “ed25519”, or “rsa”. Multiple values may be specified by separating them with commas. The default is to fetch “rsa”, “ecdsa”, and “ed25519” keys.
  - names:
      - -v
    argument: ""
    description: 'Verbose mode: print debugging messages about progress.'
tldr: |
  > Get the public ssh keys of remote hosts.
  > More information: <https://man.openbsd.org/ssh-keyscan>.

  - Retrieve all public ssh keys of a remote host:

  `ssh-keyscan {{host}}`

  - Retrieve all public ssh keys of a remote host listening on a specific port:

  `ssh-keyscan -p {{port}} {{host}}`

  - Retrieve certain types of public ssh keys of a remote host:

  `ssh-keyscan -t {{rsa,dsa,ecdsa,ed25519}} {{host}}`

  - Manually update the ssh known_hosts file with the fingerprint of a given host:

  `ssh-keyscan -H {{host}} >> ~/.ssh/known_hosts`
