#!/usr/bin/env bash
#
# Batch run fromjson.sh s.t.
#
#   json/*.json  -->  yaml/*.yaml
#
# Usage:
#
#   $ ./fromjson-batch {general|bio|experimental}
#
#  <dir> can be either general or bioinformatics
#

basedir="$(dirname "$(readlink -f "$0")")"
dir="$1"

if [[ -z "$dir" ]]; then
    echo "Set directory as the argument."
    echo "Usage: ./fromjson-batch {general|bio|experimental}"
    exit 1
fi

mkdir -p "$basedir"/../"$dir"/yaml

for f in "$basedir"/../"$dir"/json/*.json; do
    file="$(basename "$f")"
    name="${file%.*}"
    echo " ... creating ${name}.yaml in "$dir"/yaml"
    "$basedir"/fromjson "$name"
done
